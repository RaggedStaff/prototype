(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var o=n(42),r=n.n(o);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return s(t,arguments,d(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),p(o,t)})(t)}function s(t,e,n){return(s=f()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&p(r,n.prototype),r}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(h,t);var e,n,o,i,u,s=(e=h,n=f(),function(){var t,o=d(e);if(n){var r=d(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return a(this,t)});function h(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(n=s.call(this)).subscriptions=[],n.propagatedStyle=[],n.genericElementChildren=[],null!=t&&n.appendView(t,e),new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){if("STYLE"==t.tagName){var e=document.createElement("style");e.appendChild(document.createTextNode(t.innerText)),n.appendPropagatedStyle(e)}t.remove()}))}))})).observe(l(n),{attributes:!1,childList:!0}),n.host=n.getRootNode().host,n.host instanceof h&&n.host.genericElementChildren.push(l(n)),n}return o=h,(i=[{key:"appendView",value:function(t,e){1==(e=null==e||e)?(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=t):this.innerHTML=t}},{key:"appendPropagatedStyle",value:function(t){this.propagatedStyle.push(t),null!=this.shadowRoot&&this.shadowRoot.appendChild(t),this.genericElementChildren.forEach((function(e){e.appendPropagatedStyle(t.cloneNode(!0))}))}},{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"subscribe",value:function(t){this.subscriptions.push(r.a.subscribe(t))}},{key:"publish",value:function(t){r.a.publish(t)}}])&&c(o.prototype,i),u&&c(o,u),h}(u(HTMLElement))},131:function(t,e){t.exports='<div id=containerLoaderDiv class=hide> <img id=loaderImg src=http://datafoodconsortium.org/img/bwg.png> </div> <div id=main class=containerH> <a id=oidcLink href-source=http://localhost:8080/login/auth style=display:none></a> <div class=containerV style=flex:1> <x-header></x-header> <div class=containerH style=flex:1> <x-menu id=menu style=flex-basis:200px;flex-shrink:0></x-menu> <div class="box containerV" id=screen style=flex:1></div> </div> </div> </div> <style>#main{position:absolute;bottom:0;top:0;right:0;left:0}#screen{margin:5px}#containerLoaderDiv{background-color:rgba(200,200,200,.6);bottom:0;top:0;right:0;left:0;position:absolute;z-index:1;justify-content:center;align-items:center;display:flex}#loaderImg{animation:bounce .5s linear infinite;animation-direction:alternate}@keyframes bounce{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1.2)}}</style> '},132:function(t,e){t.exports='<div id=main class="box containerH"> <div> <a href=#/x-home><img src=http://datafoodconsortium.org/img/bwg.png alt=Accueil></a> </div> <div class="containerV container-content-centered"> <h1>Prototype Data Food Consortium V3.0</h1> </div> <div> <a href=#/x-profil class="containerH container-content-centered"> <svg xmlns=http://www.w3.org/2000/svg x=0px y=0px width=50 height=50 viewBox="0 0 172 172" style=fill:#000> <g transform=""> <g fill=none fill-rule=nonzero stroke=none stroke-width=1 stroke-linecap=butt stroke-linejoin=miter stroke-miterlimit=10 stroke-dasharray="" stroke-dashoffset=0 font-family=none font-weight=none font-size=none text-anchor=none style=mix-blend-mode:normal> <path d=M0,172v-172h172v172z fill=none></path> <g id=original-icon fill=#ffffff> <path d="M80.625,10.75c-38.50683,0 -69.875,31.36817 -69.875,69.875c0,38.50683 31.36817,69.875 69.875,69.875c38.50683,0 69.875,-31.36817 69.875,-69.875c0,-38.50683 -31.36817,-69.875 -69.875,-69.875zM80.625,21.5c32.71192,0 59.125,26.41308 59.125,59.125c0,14.40332 -5.12304,27.54688 -13.60547,37.79297c-4.61914,-13.10156 -14.61328,-23.6416 -27.37891,-28.84864c5.33301,-4.91308 8.73438,-11.92578 8.73438,-19.69433c0,-14.78125 -12.09375,-26.875 -26.875,-26.875c-14.78125,0 -26.875,12.09375 -26.875,26.875c0,7.76855 3.40136,14.78125 8.73438,19.69433c-12.76562,5.20703 -22.71777,15.74707 -27.33692,28.84864c-8.52441,-10.24609 -13.64746,-23.38965 -13.64746,-37.79297c0,-32.71192 26.41308,-59.125 59.125,-59.125zM80.625,53.75c8.98633,0 16.125,7.13868 16.125,16.125c0,8.98633 -7.13867,16.125 -16.125,16.125c-8.98632,0 -16.125,-7.13867 -16.125,-16.125c0,-8.98632 7.13868,-16.125 16.125,-16.125zM80.625,96.75c18.2666,0 33.25781,12.97558 36.74317,30.19239c-10.12011,8.02051 -22.84375,12.80761 -36.74317,12.80761c-13.89942,0 -26.62304,-4.7871 -36.70117,-12.80761c3.44335,-17.2168 18.43456,-30.19239 36.70117,-30.19239z"> </path> </g> <path d="" fill=none></path> </g> </g> </svg> <div class="containerV container-content-centered"> <span>Mon profil</span> </div> </a> </div> </div> <style>#main{background-color:#000;color:#fff;padding:10px;justify-content:space-between}img{height:50px}h1{margin-block-start:0;margin-block-end:0}</style> '},133:function(t,e){t.exports='<div class=panelContainer class="box containerV"> <h1> Bienvenue sur votre catalogue commun ! </h1> <h3> Afin de visualiser vos produits, veuillez cliquer sur le bouton ci-dessous afin d\'accéder à la page d\'import </h3> <div class="containerH container-content-centered"> <a href=#/x-import-catalog id=go>GO !</a> </div> </div> <style>#main{background-color:grey}#go{padding:30px;background-color:var(--color-orange)}</style> '},134:function(t,e){t.exports="<div class=containerV> <a href=#/x-import-catalog screen=x-import-catalog>import</a> <a href=#/x-catalog-import screen=x-catalog-import>consolidation</a> <a href=#/x-catalog-supply screen=x-catalog-supply>catalogue</a> <a href=#/x-oidc-test screen=x-oidc-test>test OIDC</a> </div> <style>a{background-color:grey;margin:5px;padding:5px;text-transform:uppercase;font-weight:700}.current{background-color:#fff;color:#000}</style> "},135:function(t,e){t.exports='<div class=panelContainer style=flex:1> <table style=height:100%;width:98%> <tr style=height:30px> <td> <h1>Produits non consolidés</h1> </td> </tr> <tr style=height:30px> <td> <div class="containerH space-between"> <h2>Editer un produit non consolidé</h2> <div class=containerH> <button id=edit>éditer</button> </div> </div> </td> </tr> <tr style=height:100%> <td> <div id=grid> </div> </td> </tr> </table> </div> <style></style> '},136:function(t,e){t.exports='<div class=panelContainer style=flex:1> <table style=height:100%;width:98%> <tr style=height:30px> <td> <h1>Catalogue des produits consolidés</h1> </td> </tr> <tr style=height:100px> <td> <div class=containerH> <div class=field> <label>recherche sur la description</label> <input type=text class=value name=descriptionSearch /> </div> <div class=containerH> <button id=filter>filtrer</button> </div> </div> </td> </tr> <tr style=height:30px> <td> <div class="containerH space-between"> <h2>Editer un produit de catalogue</h2> <div class=containerH> <button id=edit>éditer</button> </div> </div> </td> </tr> <tr style=height:100%> <td> <div id=treeGrid> </div> </td> </tr> </table> </div> <style></style> '},137:function(t,e){t.exports='<div class=panelContainer style=flex:1> <table style=height:100%;width:98%> <tr style=height:30px> <td> <h1>Produit non consolidé</h1> </td> </tr> <tr style=height:100px> <td> <div class=containerH> <div class=field> <label>description</label> <div class=value name=description></div> </div> <div class=field> <label>unité</label> <div class=value name=unit></div> </div> <div class=field> <label>quantité</label> <div class=value name=quantity></div> </div> <div class=field> <label>source</label> <div class=value name=source></div> </div> </div> </td> </tr> <tr style=height:100px> <td> <div class=containerH> <div class=field> <label>recherche sur la description</label> <input type=text class=value name=descriptionSearch /> </div> <div class=containerH> <button id=filter>filtrer</button> </div> </div> </td> </tr> <tr style=height:30px> <td> <div class="containerH space-between"> <h2>Associer cet import avec un produit du catalogue</h2> <div class=containerH> <button id=link>consolider</button> <button id=linkEmpty>nouveau produit</button> </div> </div> </td> </tr> <tr style=height:100%> <td> <div id=treeGrid> </div> </td> </tr> </table> </div> <style></style> '},138:function(t,e){t.exports='<div class=panelContainer style=flex:1> <table style=height:100%;width:98%> <tr style=height:30px> <td> <h1>Produit consolidé</h1> </td> </tr> <tr style=height:100px> <td> <div class=containerH> <div class=field> <label>description</label> <div class=value name=description></div> </div> <div class=field> <label>quantité</label> <div class=value name=quantity></div> </div> <div class=field> <label>unité</label> <div class=value name=unit></div> </div> <div class=field> <label>identifiant</label> <div class=value name=id></div> </div> </div> </td> </tr> <tr style=height:30px> <td> <div class="containerH space-between"> <h2>Supprimer une association d\'un import avec le produit consolidé ou choisir le produit de référence</h2> <div class=containerH> <button id=unlink>Déconsolider</button> <button id=referer>Choisir le produit de réference</button> </div> </div> </td> </tr> <tr style=height:100%> <td> <div id=grid> </div> </td> </tr> </table> </div> <style>.field{padding:20px}</style> '},139:function(t,e){t.exports='<div class="panelContainer containerV" class=box style=flex:1> <h1>Profil</h1> <div class=field> <label>email</label> <div name=email></div> </div> <div class=containerH> <button id=logout>logout</button> </div> </div> <style></style> '},140:function(t,e){t.exports='<div class="panelContainer containerV" style=flex:1> <h1>Import</h1> <p>Veuillez sélectionner une plateforme ci-dessous et cliquer sur "importer".</p> <div class=containerV> <div class=field> <select class=value id=source-select> <option value="">--Veuiller choisir une source--</option> </select> </div> <div id=options> </div> <div> <button id=import-button>importer</button> </div> </div> <h1>Suppression des produits</h1> <p>Vous souhaitez supprimer tous les produits du catalogue ? Veuillez cliquer sur le bouton ci-dessous :</p> <div> <button id=clean-button>Supprimer tous les produits</button> </div> </div> <style>span{padding:5px;font-size:small}</style> '},141:function(t,e){t.exports='<div class="panelContainer box containerV" style=flex:1> <div> <h1> Test d\'appel d\'API avec Header OIDC (token) </h1> </div> <div> <input type=text id=urlInput name=urlInput style=width:100% placeholder="url à tester"/> </div> <div class=containerH style=justify-content:space-between> <div class=containerH> <button id=urlInit> remplir avec une url user </button> <button id=urlInit2> remplir avec une url entreprise JSON-LD </button> <button id=urlInit3> remplir avec une url entreprise LDP </button> </div> <button id=urlTest> test </button> </div> <div style=flex:.5> <textarea id=header name=header style=width:100%;height:100%></textarea> </div> <div style=flex:1> <textarea id=result name=result style=width:100%;height:100%></textarea> </div> </div> <style>#main{background-color:grey}</style> '},142:function(t,e){t.exports='<div class="panelContainer box containerV" style=flex:1> <div> <h1> Test d\'appel d\'API avec Header OIDC (token) et store LDflex </h1> </div> <div> <input type=text id=urlInput name=urlInput style=width:100% placeholder="url à tester"/> </div> <div class=containerH style=justify-content:space-between> <div class=containerH> <button id=urlInit2> Remplir avec une url entreprise </button> </div> <button id=urlTest> Test </button> </div> <div style=flex:.5> <textarea id=header name=header style=width:100%;height:100%></textarea> </div> <div style=flex:1> <textarea id=result name=result style=width:100%;height:100%></textarea> </div> </div> <style>#main{background-color:grey}</style> '},143:function(t,e,n){n(144),n(49),t.exports=n(389)},334:function(t,e,n){"use strict";(function(t){var e=n(1),o=n(135),r=n.n(o),i=(n(67),n(29)),c=n.n(i),a=n(30),l=n.n(a),u=n(31),s=n.n(u);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(u,e);var n,o,i,a=y(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,r.a)).subscribe({channel:"import",topic:"changeAll",callback:function(e){t.setDataGrid(e)}}),t}return n=u,(o=[{key:"connectedCallback",value:function(){var e=this;d(v(u.prototype),"connectedCallback",this).call(this),t(this.shadowRoot.querySelector("#panel")).panel({fit:!0}),this.gridDom=t(this.shadowRoot.querySelector("#grid")),this.gridDom.datagrid({fit:!0,singleSelect:!0,autoLoad:!1,onSelect:function(t,n){e.selected=n.raw},columns:[[{field:"description",title:"description",width:300,sortable:!0},{field:"quantity",title:"quantity",width:100,sortable:!0},{field:"unit",title:"unit",width:100,sortable:!0},{field:"source",title:"source",width:200,sortable:!0}]]}),this.publish({channel:"import",topic:"loadAll"}),this.gridDom.datagrid("getPanel").find(".datagrid-header .datagrid-htable").css("height",""),this.gridDom.datagrid("getPanel").find(".datagrid-header").css("height","");var n=document.createElement("style");n.appendChild(document.createTextNode(c.a.toString())),this.shadowRoot.appendChild(n);var o=document.createElement("style");o.appendChild(document.createTextNode(l.a.toString())),this.shadowRoot.appendChild(o);var r=document.createElement("style");r.appendChild(document.createTextNode(s.a.toString())),this.shadowRoot.appendChild(r),this.shadowRoot.querySelector("#edit").addEventListener("click",(function(t){e.edit()}))}},{key:"disconnectedCallback",value:function(){d(v(u.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){d(v(u.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"edit",value:function(){this.publish({channel:"main",topic:"navigate",data:"/x-item-import/"+encodeURIComponent(this.selected["@id"])})}},{key:"setDataGrid",value:function(t){var e=t.map((function(t){return{id:0,source:t["dfc:hostedBy"]?t["dfc:hostedBy"]["dfc:name"]:"",raw:t,description:t["dfc:description"],quantity:t["dfc:quantity"],"@id":t["@id"]}}));this.gridDom.datagrid("loadData",e)}}])&&p(n.prototype,o),i&&p(n,i),u}(e.a);window.customElements.define("x-catalog-import",m)}).call(this,n(49))},386:function(t,e,n){"use strict";(function(t){var e=n(1),o=n(136),r=n.n(o),i=(n(67),n(29)),c=n.n(i),a=n(30),l=n.n(a),u=n(31),s=n.n(u);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(u,e);var n,o,i,a=y(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,r.a)).elements={descriptionSearch:t.shadowRoot.querySelector('[name="descriptionSearch"]')},t.subscribe({channel:"supply",topic:"changeAll",callback:function(e){t.rawSupplies=e,t.setDataGrid(e)}}),t}return n=u,(o=[{key:"connectedCallback",value:function(){var e=this;d(v(u.prototype),"connectedCallback",this).call(this),t(this.shadowRoot.querySelector("#panel")).panel({fit:!0}),this.gridDomTree=t(this.shadowRoot.querySelector("#treeGrid")),this.gridDomTree.treegrid({fit:!0,autoLoad:!1,idField:"id",treeField:"description",onSelect:function(t){e.selectedSupply=t.raw},columns:[[{field:"description",title:"description",width:300},{field:"quantity",title:"quantity",width:100},{field:"unit",title:"unit",width:100},{field:"source",title:"source",width:200}]]}),this.publish({channel:"supply",topic:"loadAll"}),this.gridDomTree.datagrid("getPanel").find(".datagrid-header .datagrid-htable").css("height",""),this.gridDomTree.datagrid("getPanel").find(".datagrid-header").css("height","");var n=document.createElement("style");n.appendChild(document.createTextNode(c.a.toString())),this.shadowRoot.appendChild(n);var o=document.createElement("style");o.appendChild(document.createTextNode(l.a.toString())),this.shadowRoot.appendChild(o);var r=document.createElement("style");r.appendChild(document.createTextNode(s.a.toString())),this.shadowRoot.appendChild(r),this.shadowRoot.querySelector("#edit").addEventListener("click",(function(t){e.edit()})),this.shadowRoot.querySelector("#filter").addEventListener("click",(function(t){e.filter(e.elements.descriptionSearch.value)}))}},{key:"disconnectedCallback",value:function(){d(v(u.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){d(v(u.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"edit",value:function(){this.publish({channel:"main",topic:"navigate",data:"/x-item-supply/"+encodeURIComponent(this.selectedSupply["@id"])})}},{key:"normalize",value:function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}},{key:"filter",value:function(t){var e=this,n=this.rawSupplies.filter((function(n){return e.normalize(n["dfc:description"].toUpperCase()).includes(e.normalize(t.toUpperCase()))}));this.setDataGrid(n)}},{key:"setDataGrid",value:function(t){var e=0,n=t.map((function(t){return{id:++e,description:t["dfc:description"],source:t["dfc:hostedBy"]["rdfs:label"],raw:t,children:t["dfc:hasPivot"]["dfc:represent"].filter((function(t){return null!=t["@type"]})).map((function(n){return{id:++e,source:n["dfc:hostedBy"]["rdfs:label"],raw:t,description:n["dfc:description"],quantity:n["dfc:quantity"]}}))}}));this.gridDomTree.treegrid("loadData",n)}}])&&p(n.prototype,o),i&&p(n,i),u}(e.a);window.customElements.define("x-catalog-supply",m)}).call(this,n(49))},387:function(t,e,n){"use strict";(function(t){var e=n(1),o=n(137),r=n.n(o),i=(n(67),n(29)),c=n.n(i),a=n(30),l=n.n(a),u=n(31),s=n.n(u);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=w(t);if(e){var r=w(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return g(this,n)}}function g(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(u,e);var n,o,i,a=m(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,r.a)).elements={description:t.shadowRoot.querySelector('[name="description"]'),unit:t.shadowRoot.querySelector('[name="unit"]'),quantity:t.shadowRoot.querySelector('[name="quantity"]'),source:t.shadowRoot.querySelector('[name="source"]'),descriptionSearch:t.shadowRoot.querySelector('[name="descriptionSearch"]')},t.subscribe({channel:"import",topic:"changeOne",callback:function(e){t.setData(e)}}),t.subscribe({channel:"supply",topic:"changeAll",callback:function(e){t.setDataGrid(e),t.rawSupplies=e}}),t.subscribe({channel:"import",topic:"convert.done",callback:function(e){t.publish({channel:"main",topic:"navigate",data:"/x-catalog-import"})}}),t}return n=u,(o=[{key:"connectedCallback",value:function(){var e=this;b(w(u.prototype),"connectedCallback",this).call(this),this.shadowRoot.querySelector("#link").addEventListener("click",(function(t){e.consolidate()})),this.shadowRoot.querySelector("#linkEmpty").addEventListener("click",(function(t){e.consolidate(!0)})),this.shadowRoot.querySelector("#filter").addEventListener("click",(function(t){e.filter(e.elements.descriptionSearch.value)})),this.gridDomTree=t(this.shadowRoot.querySelector("#treeGrid")),this.gridDomTree.treegrid({fit:!0,autoLoad:!1,idField:"id",treeField:"description",onSelect:function(t){e.selectedSupply=t.raw},columns:[[{field:"description",title:"description",width:300},{field:"quantity",title:"quantity",width:100},{field:"unit",title:"unit",width:100},{field:"source",title:"source",width:200}]]}),this.publish({channel:"supply",topic:"loadAll"}),this.gridDomTree.datagrid("getPanel").find(".datagrid-header .datagrid-htable").css("height",""),this.gridDomTree.datagrid("getPanel").find(".datagrid-header").css("height","");var n=document.createElement("style");n.appendChild(document.createTextNode(c.a.toString())),this.shadowRoot.appendChild(n);var o=document.createElement("style");o.appendChild(document.createTextNode(l.a.toString())),this.shadowRoot.appendChild(o);var r=document.createElement("style");r.appendChild(document.createTextNode(s.a.toString())),this.shadowRoot.appendChild(r);var i,a=/\#\/x-item-import\/(.+)\/?/gi.exec(document.location.hash);null!=a&&(i=a[1]),this.publish({channel:"import",topic:"loadOne",data:i})}},{key:"disconnectedCallback",value:function(){b(w(u.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){b(w(u.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"normalize",value:function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}},{key:"filter",value:function(t){var e=this,n=this.rawSupplies.filter((function(n){return e.normalize(n["dfc:description"].toUpperCase()).includes(e.normalize(t.toUpperCase()))}));this.setDataGrid(n)}},{key:"setDataGrid",value:function(t){var e=0,n=t.map((function(t){return{id:++e,description:t["dfc:description"],raw:t,children:t["dfc:hasPivot"]["dfc:represent"].filter((function(t){return null!=t["@type"]})).map((function(n){return{id:++e,raw:d({DFCid:t["@id"]},n),source:n["dfc:hostedBy"]["rdfs:label"],description:n["dfc:description"],quantity:n["dfc:quantity"]}}))}}));this.gridDomTree.treegrid("loadData",n)}},{key:"setData",value:function(t){console.log("setData",t),this.item=t,this.elements.description.textContent=t["dfc:description"],this.elements.quantity.textContent=t["dfc:quantity"],this.elements.source.textContent=t["dfc:hostedBy"]["rdfs:label"],this.elements.descriptionSearch.value=t["dfc:description"]}},{key:"consolidate",value:function(t){var e;!0!==t&&(e=null!=this.selectedSupply.DFCid?this.selectedSupply.DFCid:this.selectedSupply["@id"]),this.publish({channel:"import",topic:"convert",data:{importId:this.item["@id"],supplyId:e}})}}])&&y(n.prototype,o),i&&y(n,i),u}(e.a);window.customElements.define("x-item-import",k)}).call(this,n(49))},388:function(t,e,n){"use strict";(function(t){var e=n(1),o=n(138),r=n.n(o),i=(n(67),n(29)),c=n.n(i),a=n(30),l=n.n(a),u=n(31),s=n.n(u);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(u,e);var n,o,i,a=y(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,r.a)).elements={description:t.shadowRoot.querySelector('[name="description"]'),unit:t.shadowRoot.querySelector('[name="unit"]'),quantity:t.shadowRoot.querySelector('[name="quantity"]'),source:t.shadowRoot.querySelector('[name="source"]'),id:t.shadowRoot.querySelector('[name="id"]')},t.subscribe({channel:"supply",topic:"changeOne",callback:function(e){t.setData(e)}}),t}return n=u,(o=[{key:"connectedCallback",value:function(){var e=this;d(v(u.prototype),"connectedCallback",this).call(this),this.shadowRoot.querySelector("#unlink").addEventListener("click",(function(t){e.unlink()})),this.shadowRoot.querySelector("#referer").addEventListener("click",(function(t){e.referer()})),this.gridDom=t(this.shadowRoot.querySelector("#grid")),this.gridDom.datagrid({fit:!0,singleSelect:!0,autoLoad:!1,onSelect:function(t,n){e.selectedImport=n.raw},columns:[[{field:"description",title:"description",width:300},{field:"quantity",title:"quantity",width:100},{field:"unit",title:"unit",width:100},{field:"source",title:"source",width:200}]]}),this.gridDom.datagrid("getPanel").find(".datagrid-header .datagrid-htable").css("height",""),this.gridDom.datagrid("getPanel").find(".datagrid-header").css("height","");var n=document.createElement("style");n.appendChild(document.createTextNode(c.a.toString())),this.shadowRoot.appendChild(n);var o=document.createElement("style");o.appendChild(document.createTextNode(l.a.toString())),this.shadowRoot.appendChild(o);var r=document.createElement("style");r.appendChild(document.createTextNode(s.a.toString())),this.shadowRoot.appendChild(r);var i,a=/\#\/x-item-supply\/(.+)\/?/gi.exec(document.location.hash);null!=a&&(i=a[1]),this.publish({channel:"supply",topic:"loadOne",data:i})}},{key:"disconnectedCallback",value:function(){d(v(u.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){d(v(u.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"setDataGrid",value:function(t){var e=0,n=t.map((function(t){return{id:++e,source:t["dfc:hostedBy"]["rdfs:label"],raw:t,description:t["dfc:description"],quantity:t["dfc:quantity"],"@id":t["@id"]}}));this.gridDom.datagrid("loadData",n)}},{key:"setData",value:function(t){this.item=t,this.elements.description.textContent=t["dfc:description"],this.elements.quantity.textContent=t["dfc:quantity"],this.elements.id.textContent=t["@id"],this.setDataGrid(t["dfc:hasPivot"]["dfc:represent"].filter((function(t){return null!=t["@type"]})))}},{key:"unlink",value:function(){this.publish({channel:"supply",topic:"unlink",data:{supply:this.item,import:this.selectedImport}})}},{key:"referer",value:function(){null!=this.selectedImport&&(this.item["dfc:description"]=this.selectedImport["dfc:description"],this.item["dfc:quantity"]=this.selectedImport["dfc:quantity"],this.item["dfc:hasUnit"]=this.selectedImport["dfc:hasUnit"]),this.publish({channel:"supply",topic:"update",data:this.item})}}])&&p(n.prototype,o),i&&p(n,i),u}(e.a);window.customElements.define("x-item-supply",m)}).call(this,n(49))},389:function(t,e,n){"use strict";n.r(e);var o=n(1),r=n(131),i=n.n(r),c=n(132),a=n.n(c);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=h(t);if(e){var r=h(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(i,t);var e,n,o,r=p(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,a.a)}return e=i,(n=[{key:"connectedCallback",value:function(){s(h(i.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){s(h(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){s(h(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"setData",value:function(t){}}])&&u(e.prototype,n),o&&u(e,o),i}(o.a);window.customElements.define("x-header",y);var b=n(133),v=n.n(b);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w(t,e,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=R(t);if(e){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return S(this,n)}}function S(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(i,t);var e,n,o,r=O(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,v.a)}return e=i,(n=[{key:"connectedCallback",value:function(){w(R(i.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){w(R(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){w(R(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"setData",value:function(t){}}])&&g(e.prototype,n),o&&g(e,o),i}(o.a);window.customElements.define("x-home",x);var C=n(134),P=n.n(C);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _(t,e,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=q(t);if(e){var r=q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I(this,n)}}function I(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e,n,o,r=T(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,P.a)).subscribe({channel:"main",topic:"screen",callback:function(e){t.changeMenu(e)}}),t}return e=i,(n=[{key:"connectedCallback",value:function(){_(q(i.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){_(q(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){_(q(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"toggleScreen",value:function(t){var e=this.shadowRoot.querySelector("[href*="+t+"]");null!=e&&e.classList.toggle("current")}},{key:"changeMenu",value:function(t){null!=this.currentScreen&&this.toggleScreen(this.currentScreen),this.currentScreen=t,this.toggleScreen(this.currentScreen)}},{key:"setData",value:function(t){}}])&&E(e.prototype,n),o&&E(e,o),i}(o.a);window.customElements.define("x-menu",A);n(334),n(386),n(387),n(388);var L=n(139),H=n.n(L);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t,e,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=M(t);if(e){var r=M(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(i,t);var e,n,o,r=U(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,H.a)).elements={email:t.shadowRoot.querySelector('[name="email"]'),logout:t.shadowRoot.querySelector("#logout")},t.subscribe({channel:"user",topic:"changeOne",callback:function(e){t.setUser(e)}}),t}return e=i,(n=[{key:"connectedCallback",value:function(){var t=this;B(M(i.prototype),"connectedCallback",this).call(this),this.publish({channel:"user",topic:"get"}),this.elements.logout.addEventListener("click",(function(e){t.publish({channel:"user",topic:"logout"})}))}},{key:"disconnectedCallback",value:function(){B(M(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){B(M(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"setData",value:function(t){}},{key:"setUser",value:function(t){this.elements.email.textContent=t.email}}])&&z(e.prototype,n),o&&z(e,o),i}(o.a);window.customElements.define("x-profil",F);var J=n(140),W=n.n(J);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function X(t,e,n){return(X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return et(this,n)}}function et(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(i,t);var e,n,o,r=tt(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,W.a)).subscribe({channel:"source",topic:"changeAll",callback:function(e){t.loadSources(e)}}),t}return e=i,(n=[{key:"connectedCallback",value:function(){var t=this;X(nt(i.prototype),"connectedCallback",this).call(this),this.shadowRoot.getElementById("import-button").addEventListener("click",(function(e){var n=t.shadowRoot.getElementById("source-select"),o=n.options[n.selectedIndex],r=t.sources.filter((function(t){return t.name==o.value}))[0],i=r.url,c=t.shadowRoot.getElementById("options").querySelectorAll("input");c.forEach((function(t){i=(i=i.concat("?")).concat("".concat(t.getAttribute("url-param"),"=").concat(t.value))})),t.publish({channel:"source",topic:"importOne",data:{source:i,name:r.name}})})),this.shadowRoot.getElementById("clean-button").addEventListener("click",(function(e){1==confirm("êtes vous sur de vouloir supprimer le catalogue lié à cet utilisateur")&&t.publish({channel:"source",topic:"clean"})})),this.shadowRoot.getElementById("source-select").addEventListener("change",(function(e){for(var n=t.sources.filter((function(t){return t.name==e.target.value}))[0],o=t.shadowRoot.getElementById("options");o.firstChild;)o.removeChild(o.firstChild);null!=n.options&&n.options.forEach((function(t){var e=document.createElement("div");e.classList.add("field");var n=document.createElement("label");n.innerText=t.label,e.append(n);var r=document.createElement("span");r.innerText=t.info,e.append(r);var i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("url-param",t.param),e.append(i),o.append(e)}))})),this.publish({channel:"source",topic:"getAll"})}},{key:"disconnectedCallback",value:function(){X(nt(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){X(nt(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"loadSources",value:function(t){this.sources=t;var e,n=this.shadowRoot.getElementById("source-select"),o=$(t);try{for(o.s();!(e=o.n()).done;){var r=e.value,i=document.createElement("option");i.innerText=r.name,i.value=r.name,i.setAttribute("x-url",r.url),n.append(i)}}catch(t){o.e(t)}finally{o.f()}}},{key:"setData",value:function(t){}}])&&Q(e.prototype,n),o&&Q(e,o),i}(o.a);window.customElements.define("x-import-catalog",ot);var rt=n(141),it=n.n(rt);function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lt(t,e,n){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=pt(t);if(e){var r=pt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ft(this,n)}}function ft(t,e){return!e||"object"!==ct(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(i,t);var e,n,o,r=st(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,it.a)).elements={urlInit:t.shadowRoot.querySelector("#urlInit"),urlInit2:t.shadowRoot.querySelector("#urlInit2"),urlInit3:t.shadowRoot.querySelector("#urlInit3"),result:t.shadowRoot.querySelector('[name="result"]'),header:t.shadowRoot.querySelector('[name="header"]'),urlTest:t.shadowRoot.querySelector("#urlTest"),urlInput:t.shadowRoot.querySelector('[name="urlInput"]')},t.subscribe({channel:"testAPI",topic:"testApiHeaderResponse",callback:function(e){t.setResult(e)}}),t}return e=i,(n=[{key:"connectedCallback",value:function(){var t=this;lt(pt(i.prototype),"connectedCallback",this).call(this),this.elements.urlTest.addEventListener("click",(function(e){var n=t.elements.urlInput.value;t.publish({channel:"testAPI",topic:"testApiHeaderCall",data:n})})),this.elements.urlInit.addEventListener("click",(function(e){var n=window.location.origin+"/login/auth/me";t.elements.urlInput.value=n})),this.elements.urlInit2.addEventListener("click",(function(e){var n=window.location.origin+"/data/core/me/entrepriseJSONLD";t.elements.urlInput.value=n})),this.elements.urlInit3.addEventListener("click",(function(e){var n=window.location.origin+"/data/core/me/entrepriseLDP";t.elements.urlInput.value=n}))}},{key:"setResult",value:function(t){this.elements.result.value=JSON.stringify(t.body),this.elements.header.value=t.headers}},{key:"disconnectedCallback",value:function(){lt(pt(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){lt(pt(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"setData",value:function(t){}}])&&at(e.prototype,n),o&&at(e,o),i}(o.a);window.customElements.define("x-oidc-test",dt);var ht=n(142),yt=n.n(ht);function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e,n,o,r,i,c){try{var a=t[i](c),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(o,r)}function mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gt(t,e,n){return(gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=St(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=St(t);if(e){var r=St(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ot(this,n)}}function Ot(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(i,t);var e,n,o,r=kt(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,yt.a)).elements={urlInit:t.shadowRoot.querySelector("#urlInit"),urlInit2:t.shadowRoot.querySelector("#urlInit2"),result:t.shadowRoot.querySelector('[name="result"]'),header:t.shadowRoot.querySelector('[name="header"]'),urlTest:t.shadowRoot.querySelector("#urlTest"),urlInput:t.shadowRoot.querySelector('[name="urlInput"]')},t.subscribe({channel:"testAPI",topic:"testApiHeaderResponse",callback:function(e){t.setResult(e)}}),t}return e=i,(n=[{key:"connectedCallback",value:function(){var t=this;gt(St(i.prototype),"connectedCallback",this).call(this),this.elements.urlTest.addEventListener("click",function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.elements.urlInput.value;case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function c(t){vt(i,o,r,c,a,"next",t)}function a(t){vt(i,o,r,c,a,"throw",t)}c(void 0)}))});return function(t){return n.apply(this,arguments)}}()),this.elements.urlInit2.addEventListener("click",(function(e){var n=window.location.origin+"/data/core/me/entrepriseLDP";t.elements.urlInput.value=n}))}},{key:"setResult",value:function(t){console.log("result",t),this.elements.result.value=JSON.stringify(t.body),this.elements.header.value=t.headers}},{key:"disconnectedCallback",value:function(){gt(St(i.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){gt(St(i.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"setData",value:function(t){}}])&&mt(e.prototype,n),o&&mt(e,o),i}(o.a);function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e,n,o,r,i,c){try{var a=t[i](c),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(o,r)}function Pt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function jt(t,e,n){return(jt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Et(t,e){return(Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Tt(t);if(e){var r=Tt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Dt(this,n)}}function Dt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("x-ldp-test",Rt);var It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(l,t);var e,n,o,r,c,a=_t(l);function l(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,i.a)).elements={loader:t.shadowRoot.querySelector("#containerLoaderDiv")},t.subscribe({channel:"main",topic:"screen",callback:function(e){t.loadComponent(e)}}),t.subscribe({channel:"ui",topic:"activLoader",callback:function(){t.elements.loader.classList.remove("hide")}}),t.subscribe({channel:"ui",topic:"hideLoader",callback:function(){t.elements.loader.classList.add("hide")}}),t}return e=l,(n=[{key:"loadComponent",value:function(t){console.log(t);var e=this.shadowRoot.querySelector("#screen"),n=document.createElement(t);for(n.setAttribute("style","flex:1"),n.classList.add("containerV");null!=e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(n),this.propagatedStyle.forEach((function(t){n.appendChild(t.cloneNode(!0))})),n}},{key:"connectedCallback",value:function(){jt(Tt(l.prototype),"connectedCallback",this).call(this),this.activAuth()}},{key:"activAuth",value:(r=regeneratorRuntime.mark((function t(){var e,n,o,r,i,c,a,l,u,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!=(e=window.location.search.split("?")[1])&&(n=e.split("&").map((function(t){var e=t.split("=");return{key:e[0],value:e[1]}})),null!=(o=n.filter((function(t){return"token"==t.key}))[0])&&(localStorage.setItem("token",o.value),r=window.location.origin+window.location.pathname+window.location.hash,window.location=r)),i=localStorage.getItem("token"),(c=new Headers).append("Authorization","JWT "+i),a={method:"GET",headers:c,mode:"cors"},t.prev=9,t.next=12,fetch("".concat("http://localhost:8080","/login/auth/me"),a);case 12:if(200!=(l=t.sent).status){t.next=20;break}return t.next=16,l.json();case 16:u=t.sent,this.publish({channel:"profil",topic:"set",data:u}),t.next=24;break;case 20:return t.next=22,l.text();case 22:t.sent,setTimeout((function(){var t=s.shadowRoot.getElementById("oidcLink");t.setAttribute("href",t.getAttribute("href-source")+"?app_referer="+window.location.hash.substr(1)),t.click()}),1);case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(9),console.log("Request failed",t.t0);case 29:return t.prev=29,t.finish(29);case 31:case"end":return t.stop()}}),t,this,[[9,26,29,31]])})),c=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function c(t){Ct(i,n,o,c,a,"next",t)}function a(t){Ct(i,n,o,c,a,"throw",t)}c(void 0)}))},function(){return c.apply(this,arguments)})},{key:"disconnectedCallback",value:function(){jt(Tt(l.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){jt(Tt(l.prototype),"attributeChangedCallback",this).call(this,t,e,n)}},{key:"removeParam",value:function(t){var e=document.location.href,n=e.split("?");if(n.length>=2){for(var o=n.shift(),r=n.join("?"),i=encodeURIComponent(t)+"=",c=r.split(/[&;]/g),a=c.length;a-- >0;)-1!==c[a].lastIndexOf(i,0)&&c.splice(a,1);e=o+"?"+c.join("&"),window.history.pushState("",document.title,e)}return e}}])&&Pt(e.prototype,n),o&&Pt(e,o),l}(o.a);window.customElements.define("x-navigation",It);var qt=n(54),At=n.n(qt);function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nt(t,e,n){return(Nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ut(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function zt(t,e){return(zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Ut(t);if(e){var r=Ut(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Vt(this,n)}}function Vt(t,e){return!e||"object"!==Lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}(i,t);var e,n,o,r=Bt(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).firstRoute=!1;return t.router=new At.a(null,!0,"#"),t.router.on("/:screen*",(function(e,n){null==e.screen&&(t.firstRoute=!0),t.publish({channel:"main",topic:"screen",data:e.screen})})).resolve(),t.subscribe({channel:"main",topic:"navigate",callback:function(e){t.router.navigate(e)}}),t}return e=i,(n=[{key:"connectedCallback",value:function(){Nt(Ut(i.prototype),"connectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(Nt(Ut(i.prototype),"attributeChangedCallback",this).call(this,t,e,n),t){case"default":this.router.navigate("/"+n)}}}])&&Ht(e.prototype,n),o&&Ht(e,o),i}(o.a);window.customElements.define("x-router",Gt);var Mt=n(42),Ft=n.n(Mt);function Jt(t,e,n,o,r,i,c){try{var a=t[i](c),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(o,r)}function Wt(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function c(t){Jt(i,o,r,c,a,"next",t)}function a(t){Jt(i,o,r,c,a,"throw",t)}c(void 0)}))}}function Yt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var $t=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o,r;return e=t,(n=[{key:"getConfig",value:(r=Wt(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:8080","/data/core/config"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"ajaxCall",value:function(t,e){return e=e||{},new Promise((function(n,o){var r=localStorage.getItem("token");if(null!=r&&"undefined"!=r){var i=new Headers;i.append("Authorization","JWT "+r),i.append("Content-Type","application/json");var c={headers:i,mode:"cors"};Object.assign(e,c),Ft.a.publish({channel:"ui",topic:"activLoader"}),fetch(t,e).then(function(){var t=Wt(regeneratorRuntime.mark((function t(e){var r,i,c,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ft.a.publish({channel:"ui",topic:"hideLoader"}),!e.ok){t.next=11;break}return r=e.status.toString(),e.headers.forEach((function(t,e){r=(r=r.concat(String.fromCharCode(10))).concat(e+": "+t)})),t.next=7,e.json();case 7:i=t.sent,n({body:i,headers:r}),t.next=28;break;case 11:return console.log("error",e),t.prev=12,t.next=15,e.json();case 15:a=t.sent,c=a.message,o(new Error(a.message)),t.next=25;break;case 20:return t.prev=20,t.t0=t.catch(12),t.next=24,e.text();case 24:c=t.sent;case 25:return t.prev=25,t.finish(25);case 27:o(new Error(c));case 28:case"end":return t.stop()}}),t,null,[[12,20,25,27]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){Ft.a.publish({channel:"ui",topic:"hideLoader"}),o(t)}))}else o(new Error("no token in localstorage"))}))}}])&&Yt(e.prototype,n),o&&Yt(e,o),t}();function Kt(t){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e,n,o,r,i,c){try{var a=t[i](c),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(o,r)}function Xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ne(t);if(e){var r=ne(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ee(this,n)}}function ee(t,e){return!e||"object"!==Kt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(a,t);var e,n,o,r,i,c=te(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=c.call(this)).util=new $t,t.subscribe({channel:"supply",topic:"loadAll",callback:function(e){t.loadAllSupply()}}),t.subscribe({channel:"supply",topic:"loadOne",callback:function(e){t.loadOneSupply(e)}}),t.subscribe({channel:"supply",topic:"unlink",callback:function(e){t.unlinkSupply(e.supply,e.import)}}),t.subscribe({channel:"supply",topic:"update",callback:function(e){t.updateSupply(e)}}),t.subscribe({channel:"import",topic:"convert",callback:function(e){t.convertImportToSupply(e.importId,e.supplyId)}}),t.subscribe({channel:"import",topic:"loadAll",callback:function(e){t.loadAllImport()}}),t.subscribe({channel:"import",topic:"loadOne",callback:function(e){t.loadOneImport(e)}}),t.subscribe({channel:"source",topic:"getAll",callback:function(e){t.getSources()}}),t.subscribe({channel:"source",topic:"importOne",callback:function(e){t.importOne(e.source,e.name)}}),t.subscribe({channel:"source",topic:"clean",callback:function(e){t.cleanAll()}}),t}return e=a,(n=[{key:"cleanAll",value:function(t){var e=this;this.util.ajaxCall("/data/core/clean",{method:"POST"}).then((function(t){console.log("resolve ajaxCall",t),e.publish({channel:"main",topic:"navigate",data:"/x-catalog-supply"})}))}},{key:"importOne",value:function(t,e){var n="".concat("http://localhost:8080","/data/core/import/importSource?source=").concat(t);this.util.ajaxCall(n,{method:"POST"}).then((function(t){alert(e+" bien importé")})).catch((function(t){alert(t)}))}},{key:"convertImportToSupply",value:function(t,e){var n=this,o="http://localhost:8080/data/core/import/".concat(t,"/convert/").concat(null==e?"":e);this.util.ajaxCall(o,{method:"POST"}).then((function(t){n.publish({channel:"import",topic:"convert.done",data:t.body})}))}},{key:"getSources",value:(r=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.util.getConfig();case 2:e=t.sent,this.publish({channel:"source",topic:"changeAll",data:e.sources});case 4:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function c(t){Qt(i,n,o,c,a,"next",t)}function a(t){Qt(i,n,o,c,a,"throw",t)}c(void 0)}))},function(){return i.apply(this,arguments)})},{key:"loadAllImport",value:function(){var t=this,e="".concat("http://localhost:8080","/data/core/import");this.catalogs=[],this.catalogsTree=[],this.util.ajaxCall(e).then((function(e){var n=(e.body["@graph"]?e.body["@graph"]:[]).map((function(t){return{"@id":t["@id"],source:t.source||t.source,"dfc:description":t["dfc:description"]||t.description,"dfc:quantity":t["dfc:quantity"]||t.quantity,"dfc:hostedBy":t["dfc:hostedBy"]||t.hostedBy}}));console.log("newRecords",n),t.catalogs=n,t.catalogs.sort((function(t,e){return t["dfc:description"].localeCompare(e["dfc:description"])})),t.publish({channel:"import",topic:"changeAll",data:t.catalogs})}))}},{key:"loadOneImport",value:function(t){var e=this,n="http://localhost:8080/data/core/import/".concat(t);this.util.ajaxCall(n).then((function(t){e.selectedImport=t.body,e.publish({channel:"import",topic:"changeOne",data:e.selectedImport})}))}},{key:"loadAllSupply",value:function(){var t=this,e="".concat("http://localhost:8080","/data/core/supply");this.catalogs=[],this.catalogsTree=[],this.util.ajaxCall(e).then((function(e){if(console.log(e),e.body["@graph"]){var n=e.body["@graph"].map((function(t){return{"@id":t["@id"],imports:t.imports,"dfc:description":t["dfc:description"],"dfc:hasPivot":t["dfc:hasPivot"],"dfc:hostedBy":t["dfc:hostedBy"]}}));t.catalogs=n,t.catalogs.sort((function(t,e){return t["dfc:description"].localeCompare(e["dfc:description"])})),t.publish({channel:"supply",topic:"changeAll",data:t.catalogs})}else t.publish({channel:"supply",topic:"changeAll",data:[]})}))}},{key:"loadOneSupply",value:function(t){var e=this,n="http://localhost:8080/data/core/supply/".concat(t);this.util.ajaxCall(n).then((function(t){e.selectedSupply=t.body,e.publish({channel:"supply",topic:"changeOne",data:e.selectedSupply})}))}},{key:"unlinkSupply",value:function(t,e){var n=this;t["dfc:hasPivot"]["dfc:represent"]=t["dfc:hasPivot"]["dfc:represent"].filter((function(t){return t["@id"]!=e["@id"]}));var o={method:"POST",body:JSON.stringify(t)};this.util.ajaxCall("/data/core/supply/",o).then((function(t){n.selectedSupply=t.body,n.publish({channel:"supply",topic:"changeOne",data:n.selectedSupply})}))}},{key:"updateSupply",value:function(t){var e=this,n="".concat("http://localhost:8080","/data/core/supply/"),o={method:"POST",body:JSON.stringify(t)};this.util.ajaxCall(n,o).then((function(t){e.selectedSupply=t.body,e.publish({channel:"supply",topic:"changeOne",data:e.selectedSupply})}))}}])&&Xt(e.prototype,n),o&&Xt(e,o),a}(o.a);function re(t){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=ue(t);if(e){var r=ue(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return le(this,n)}}function le(t,e){return!e||"object"!==re(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("x-service-catalog",oe);var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ce(t,e)}(i,t);var e,n,o,r=ae(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).util=new $t,t.subscribe({channel:"testAPI",topic:"testApiHeaderCall",callback:function(e){t.testApiHeader(e)}}),t}return e=i,(n=[{key:"testApiHeader",value:function(t){var e=this;t=window.location.origin+"/data/core/redirectAPI?url="+t,this.util.ajaxCall(t).then((function(t){e.publish({channel:"testAPI",topic:"testApiHeaderResponse",data:t})}))}}])&&ie(e.prototype,n),o&&ie(e,o),i}(o.a);function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function de(t,e){return(de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=be(t);if(e){var r=be(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ye(this,n)}}function ye(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}window.customElements.define("x-test-api",se);var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}(i,t);var e,n,o,r=he(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).util=new $t,t.subscribe({channel:"profil",topic:"set",callback:function(e){t.setProfil(e)}}),t.subscribe({channel:"user",topic:"get",callback:function(e){t.getUser()}}),t.subscribe({channel:"user",topic:"createEntreprise",callback:function(e){t.createEntrepriseForUser(e)}}),t.subscribe({channel:"user",topic:"logout",callback:function(){t.logout()}}),t}return e=i,(n=[{key:"setProfil",value:function(t){this.profil=t,this.publish({channel:"user",topic:"changeOne",data:this.profil.user})}},{key:"createEntrepriseForUser",value:function(t){var e=this,n="".concat("http://localhost:8080","/data/core/user/").concat(this.profil.user._id,"/entreprise"),o={method:"POST",body:JSON.stringify(t)};this.util.ajaxCall(n,o).then((function(t){e.profil.user=t.body,e.publish({channel:"user",topic:"changeOne",data:e.profil.user})}))}},{key:"logout",value:function(){localStorage.removeItem("token"),console.log(window.location.href);var t="http://localhost:8080/login/auth/logout?redirectUri=".concat(window.location.href);window.location.href=t}},{key:"getUser",value:function(t){null!=this.profil&&null!=this.profil.user&&this.publish({channel:"user",topic:"changeOne",data:this.profil.user})}}])&&pe(e.prototype,n),o&&pe(e,o),i}(o.a);window.customElements.define("x-service-user",ve),console.log("url server: ".concat(JSON.stringify("http://localhost:8080")))}},[[143,2,0,3]]]);
//# sourceMappingURL=main.61970154bffa263bbc20.js.map